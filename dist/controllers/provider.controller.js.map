{"version":3,"sources":["../../src/controllers/provider.controller.js"],"names":["unCompletedOrderOfOneProvider","req","res","next","limit","parseInt","query","page","find","$and","provider","params","providerId","$or","status","populate","skip","sort","creationDate","allOrders","result","map","OneOrderItem","cartonsResult","cartons","elme","cartonsQuantity","x","length","oneCartonItem","item","quantity","push","galonsResult","galons","galonsQuantityOfBuying","galonsQuantityOfSubstitution","oneGalonsItem","QuantityOfBuying","QuantityOfSubstitution","location","customer","id","price","deliveryPrice","send","Math","ceil","completedOrderOfOneProvider","countOrdersOfProvider","findById","providerDetails","count","countOfAllOrder","queryComplete","countOfCompleted","queryOfPending","countOfPendding","queryOfRefuse","countOfRefuse","json","retriveSomeOfReports","from","to","$gte","$lte","console","log","totalProductPrice","reduce","accumulator","currentValue","totalDeliveryPrice","totalPrice","numberOfOrders"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;kBAEe;AACLA,iCADK,yCACyBC,GADzB,EAC8BC,GAD9B,EACmCC,IADnC,EACyC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEtCC,iCAFsC,GAE9BC,SAASJ,IAAIK,KAAJ,CAAUF,KAAnB,KAA6B,IAFC;AAGxCG,gCAHwC,GAGjCN,IAAIK,KAAJ,CAAUC,IAAV,IAAkB,CAHe;AAAA;AAAA,mCAItB,gBAAMC,IAAN,CAAW;AAC7BC,sCAAM,CACF,EAAEC,UAAUT,IAAIU,MAAJ,CAAWC,UAAvB,EADE,EAEF,EAAEC,KAAK,CAAC,EAAEC,QAAQ,UAAV,EAAD,EAAyB,EAAEA,QAAQ,UAAV,EAAzB,EAAiD,EAAEA,QAAQ,UAAV,EAAjD,CAAP,EAFE;AADuB,6BAAX,EAMjBC,QANiB,CAMR,SANQ,EAOjBA,QAPiB,CAOR,QAPQ,EAQjBA,QARiB,CAQR,UARQ,EASjBA,QATiB,CASR,UATQ,EAUjBC,IAViB,CAUZ,CAACT,OAAO,CAAR,IAAaH,KAVD,EAUQA,KAVR,CAUcA,KAVd,EAWjBa,IAXiB,CAWZ,EAAEC,cAAc,CAAC,CAAjB,EAXY,CAJsB;;AAAA;AAIxCC,qCAJwC;;AAgB5C;AACIC,kCAjBwC,GAiB/BD,UAAUE,GAAV,CAAc,gBAAQ;AAC/B;AACA,oCAAIC,eAAe,EAAnB;AACA,oCAAIC,gBAAgB,EAApB;AACA,oCAAIC,UAAUC,KAAKD,OAAnB;AACA,oCAAIE,kBAAkBD,KAAKC,eAA3B;AACA,qCAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIH,QAAQI,MAA5B,EAAoCD,GAApC,EAAyC;AACrC,wCAAIE,gBAAgB,EAApB;AACA,wCAAIC,OAAON,QAAQG,CAAR,CAAX;AACA,wCAAII,WAAWL,gBAAgBC,CAAhB,CAAf;AACAE,kDAAcC,IAAd,GAAqBA,IAArB;AACAD,kDAAcE,QAAd,GAAyBA,QAAzB;AACAR,kDAAcS,IAAd,CAAmBH,aAAnB;AACH;AACD;AACAP,6CAAaE,OAAb,GAAuBD,aAAvB;AACA;AACA,oCAAIU,eAAe,EAAnB;AACA,oCAAIC,SAAST,KAAKS,MAAlB;AACA,oCAAIC,yBAAyBV,KAAKU,sBAAlC;AACA,oCAAIC,+BAA+BX,KAAKW,4BAAxC;AACA,qCAAK,IAAIT,KAAI,CAAb,EAAgBA,KAAIO,OAAON,MAA3B,EAAmCD,IAAnC,EAAwC;AACpC,wCAAIU,gBAAgB,EAApB;AACA,wCAAIP,QAAOI,OAAOP,EAAP,CAAX;AACA,wCAAIW,mBAAmBH,uBAAuBR,EAAvB,CAAvB;AACA,wCAAIY,yBAAyBH,6BAA6BT,EAA7B,CAA7B;AACAU,kDAAcP,IAAd,GAAqBA,KAArB;AACAO,kDAAcF,sBAAd,GAAuCG,gBAAvC;AACAD,kDAAcD,4BAAd,GAA6CG,sBAA7C;AACAN,iDAAaD,IAAb,CAAkBK,aAAlB;AACH;AACD;AACAf,6CAAaY,MAAb,GAAsBD,YAAtB;AACAX,6CAAakB,QAAb,GAAwBf,KAAKe,QAA7B;AACAlB,6CAAamB,QAAb,GAAwBhB,KAAKgB,QAA7B;AACAnB,6CAAaZ,QAAb,GAAwBe,KAAKf,QAA7B;AACAY,6CAAaR,MAAb,GAAsBW,KAAKX,MAA3B;AACAQ,6CAAaJ,YAAb,GAA4BO,KAAKP,YAAjC;AACAI,6CAAaoB,EAAb,GAAkBjB,KAAKiB,EAAvB;AACApB,6CAAaqB,KAAb,GAAqBlB,KAAKkB,KAA1B;AACArB,6CAAasB,aAAb,GAA6BnB,KAAKmB,aAAlC;AACA,uCAAOtB,YAAP;AACH,6BA1CY,CAjB+B;;AA4D5CpB,gCAAI2C,IAAJ,CAAS,0BACLzB,MADK,EAELb,IAFK,EAGLuC,KAAKC,IAAL,CAAW3B,OAAOQ,MAAR,GAAkBxB,KAA5B,CAHK,EAILA,KAJK,EAKLgB,OAAOQ,MALF,EAML3B,GANK,CAAT;AA5D4C;AAAA;;AAAA;AAAA;AAAA;;AAqE5CE;;AArE4C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAuEnD,KAxEU;AAyEL6C,+BAzEK,uCAyEuB/C,GAzEvB,EAyE4BC,GAzE5B,EAyEiCC,IAzEjC,EAyEuC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEpCC,iCAFoC,GAE5BC,SAASJ,IAAIK,KAAJ,CAAUF,KAAnB,KAA6B,IAFD;AAGtCG,gCAHsC,GAG/BN,IAAIK,KAAJ,CAAUC,IAAV,IAAkB,CAHa;AAAA;AAAA,mCAIpB,gBAAMC,IAAN,CAAW;AAC7BC,sCAAM,CACF,EAAEC,UAAUT,IAAIU,MAAJ,CAAWC,UAAvB,EADE,EAEF,EAAEC,KAAK,CAAC,EAAEC,QAAQ,WAAV,EAAD,EAA0B,EAAEA,QAAQ,UAAV,EAA1B,CAAP,EAFE;AADuB,6BAAX,EAMjBC,QANiB,CAMR,SANQ,EAOjBA,QAPiB,CAOR,QAPQ,EAQjBA,QARiB,CAQR,UARQ,EASjBA,QATiB,CASR,UATQ,EAUjBC,IAViB,CAUZ,CAACT,OAAO,CAAR,IAAaH,KAVD,EAUQA,KAVR,CAUcA,KAVd,EAWjBa,IAXiB,CAWZ,EAAEC,cAAc,CAAC,CAAjB,EAXY,CAJoB;;AAAA;AAItCC,qCAJsC;;AAgB1C;AACIC,kCAjBsC,GAiB7BD,UAAUE,GAAV,CAAc,gBAAQ;AAC/B;AACA,oCAAIC,eAAe,EAAnB;AACA,oCAAIC,gBAAgB,EAApB;AACA,oCAAIC,UAAUC,KAAKD,OAAnB;AACA,oCAAIE,kBAAkBD,KAAKC,eAA3B;AACA,qCAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIH,QAAQI,MAA5B,EAAoCD,GAApC,EAAyC;AACrC,wCAAIE,gBAAgB,EAApB;AACA,wCAAIC,OAAON,QAAQG,CAAR,CAAX;AACA,wCAAII,WAAWL,gBAAgBC,CAAhB,CAAf;AACAE,kDAAcC,IAAd,GAAqBA,IAArB;AACAD,kDAAcE,QAAd,GAAyBA,QAAzB;AACAR,kDAAcS,IAAd,CAAmBH,aAAnB;AACH;AACD;AACAP,6CAAaE,OAAb,GAAuBD,aAAvB;AACA;AACA,oCAAIU,eAAe,EAAnB;AACA,oCAAIC,SAAST,KAAKS,MAAlB;AACA,oCAAIC,yBAAyBV,KAAKU,sBAAlC;AACA,oCAAIC,+BAA+BX,KAAKW,4BAAxC;AACA,qCAAK,IAAIT,MAAI,CAAb,EAAgBA,MAAIO,OAAON,MAA3B,EAAmCD,KAAnC,EAAwC;AACpC,wCAAIU,gBAAgB,EAApB;AACA,wCAAIP,SAAOI,OAAOP,GAAP,CAAX;AACA,wCAAIW,mBAAmBH,uBAAuBR,GAAvB,CAAvB;AACA,wCAAIY,yBAAyBH,6BAA6BT,GAA7B,CAA7B;AACAU,kDAAcP,IAAd,GAAqBA,MAArB;AACAO,kDAAcF,sBAAd,GAAuCG,gBAAvC;AACAD,kDAAcD,4BAAd,GAA6CG,sBAA7C;AACAN,iDAAaD,IAAb,CAAkBK,aAAlB;AACH;AACD;AACAf,6CAAaY,MAAb,GAAsBD,YAAtB;AACAX,6CAAakB,QAAb,GAAwBf,KAAKe,QAA7B;AACAlB,6CAAamB,QAAb,GAAwBhB,KAAKgB,QAA7B;AACAnB,6CAAaZ,QAAb,GAAwBe,KAAKf,QAA7B;AACAY,6CAAaR,MAAb,GAAsBW,KAAKX,MAA3B;AACAQ,6CAAaJ,YAAb,GAA4BO,KAAKP,YAAjC;AACAI,6CAAaoB,EAAb,GAAkBjB,KAAKiB,EAAvB;AACApB,6CAAaqB,KAAb,GAAqBlB,KAAKkB,KAA1B;AACArB,6CAAasB,aAAb,GAA6BnB,KAAKmB,aAAlC;AACA,uCAAOtB,YAAP;AACH,6BA1CY,CAjB6B;;AA4D1CpB,gCAAI2C,IAAJ,CAAS,0BACLzB,MADK,EAELb,IAFK,EAGLuC,KAAKC,IAAL,CAAW3B,OAAOQ,MAAR,GAAkBxB,KAA5B,CAHK,EAILA,KAJK,EAKLgB,OAAOQ,MALF,EAML3B,GANK,CAAT;AA5D0C;AAAA;;AAAA;AAAA;AAAA;;AAqE1CE;;AArE0C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAuEjD,KAhJU;;AAiJX;AACM8C,yBAlJK,iCAkJiBhD,GAlJjB,EAkJsBC,GAlJtB,EAkJ2BC,IAlJ3B,EAkJiC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEhCS,sCAFgC,GAEnBX,IAAIU,MAAJ,CAAWC,UAFQ;AAAA;AAAA,mCAGR,eAAKsC,QAAL,CAActC,UAAd,CAHQ;;AAAA;AAGhCuC,2CAHgC;AAAA;AAAA,mCAIR,gBAAMC,KAAN,CAAY,EAAE1C,UAAUE,UAAZ,EAAZ,CAJQ;;AAAA;AAIhCyC,2CAJgC;AAMhCC,yCANgC,GAMhB,EANgB;;AAOpCA,0CAAcxC,MAAd,GAAuB,WAAvB;AACAwC,0CAAc5C,QAAd,GAAyBE,UAAzB;AARoC;AAAA,mCASP,gBAAMwC,KAAN,CAAYE,aAAZ,CATO;;AAAA;AAShCC,4CATgC;AAWhCC,0CAXgC,GAWf,EAXe;;AAYpCA,2CAAe1C,MAAf,GAAwB,UAAxB;AACA0C,2CAAe9C,QAAf,GAA0BE,UAA1B;AAboC;AAAA,mCAcR,gBAAMwC,KAAN,CAAYI,cAAZ,CAdQ;;AAAA;AAchCC,2CAdgC;AAgBhCC,yCAhBgC,GAgBhB,EAhBgB;;AAiBpCA,0CAAc5C,MAAd,GAAuB,UAAvB;AACA4C,0CAAchD,QAAd,GAAyBE,UAAzB;AAlBoC;AAAA,mCAmBV,gBAAMwC,KAAN,CAAYM,aAAZ,CAnBU;;AAAA;AAmBhCC,yCAnBgC;AAAA,8DAqB7BzD,IAAIY,MAAJ,CAAW,GAAX,EAAgB8C,IAAhB,CAAqB;AACxBP,gEADwB;AAExBE,kEAFwB;AAGxBE,gEAHwB;AAIxBE;AAJwB,6BAArB,CArB6B;;AAAA;AAAA;AAAA;;AA4BpCxD;;AA5BoC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA8B3C,KAhLU;;;AAkLX;AACM0D,wBAnLK,gCAmLgB5D,GAnLhB,EAmLqBC,GAnLrB,EAmL0BC,IAnL1B,EAmLgC;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAE/BS,sCAF+B,GAElBX,IAAIU,MAAJ,CAAWC,UAFO;AAG/BN,iCAH+B,GAGvB,EAHuB;AAAA,yCAIhBL,IAAIK,KAJY,EAI7BwD,IAJ6B,cAI7BA,IAJ6B,EAIvBC,EAJuB,cAIvBA,EAJuB;;;AAMnC,gCAAID,IAAJ,EACIxD,MAAMY,YAAN,GAAqB,EAAE8C,MAAM,CAACF,IAAT,EAArB;AACJ,gCAAIC,EAAJ,EACIzD,MAAMY,YAAN,gBAA0BZ,MAAMY,YAAhC,IAA8C+C,MAAM,CAACF,EAArD;AACJzD,kCAAMI,QAAN,GAAiBE,UAAjB;AACAN,kCAAMQ,MAAN,GAAe,WAAf;AACAoD,oCAAQC,GAAR,CAAYlE,IAAIK,KAAhB;AAZmC;AAAA,mCAab,gBAAME,IAAN,CAAWF,KAAX,CAba;;AAAA;AAa/Ba,qCAb+B;AAc/BiD,6CAd+B,GAcXjD,UAAUkD,MAAV,CAAiB,UAACC,WAAD,EAAcC,YAAd;AAAA,uCAA+BD,cAAcC,aAAa5B,KAA1D;AAAA,6BAAjB,EAAkF,CAAlF,CAdW;;AAenCuB,oCAAQC,GAAR,CAAYC,iBAAZ;AACII,8CAhB+B,GAgBVrD,UAAUkD,MAAV,CAAiB,UAACC,WAAD,EAAcC,YAAd;AAAA,uCAA+BD,cAAcC,aAAa3B,aAA1D;AAAA,6BAAjB,EAA0F,CAA1F,CAhBU;AAiB/B6B,sCAjB+B,GAiBlBD,qBAAqBJ,iBAjBH;AAkB/BM,0CAlB+B,GAkBdvD,UAAUS,MAlBI;AAAA,8DAmB5B1B,IAAIY,MAAJ,CAAW,GAAX,EAAgB8C,IAAhB,CAAqB;AACxBQ,oEADwB;AAExBI,sEAFwB;AAGxBC,sDAHwB;AAIxBC;AAJwB,6BAArB,CAnB4B;;AAAA;AAAA;AAAA;;AA0BnCvE;;AA1BmC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA4B1C;AA/MU,C","file":"provider.controller.js","sourcesContent":["import mongoose from 'mongoose';\r\nimport ApiResponse from '../helpers/ApiResponse';\r\nimport ApiError from '../helpers/ApiError';\r\nimport Order from '../models/order.model';\r\nimport User from '../models/user.model'\r\n\r\nexport default {\r\n    async unCompletedOrderOfOneProvider(req, res, next) {\r\n        try {\r\n            const limit = parseInt(req.query.limit) || 1100;\r\n            let page = req.query.page || 1;\r\n            let allOrders = await Order.find({\r\n                $and: [\r\n                    { provider: req.params.providerId },\r\n                    { $or: [{ status: \"onTheWay\" }, { status: \"accepted\" }, { status: \"pendding\" }] }\r\n                ]\r\n            })\r\n                .populate('cartons')\r\n                .populate('galons')\r\n                .populate('customer')\r\n                .populate('provider')\r\n                .skip((page - 1) * limit).limit(limit)\r\n                .sort({ creationDate: -1 });\r\n            //prepare response \r\n            let result = allOrders.map(elme => {\r\n                //first prepare cartons\r\n                let OneOrderItem = {};\r\n                let cartonsResult = [];\r\n                let cartons = elme.cartons;\r\n                let cartonsQuantity = elme.cartonsQuantity;\r\n                for (let x = 0; x < cartons.length; x++) {\r\n                    let oneCartonItem = {};\r\n                    let item = cartons[x];\r\n                    let quantity = cartonsQuantity[x]\r\n                    oneCartonItem.item = item;\r\n                    oneCartonItem.quantity = quantity;\r\n                    cartonsResult.push(oneCartonItem);\r\n                }\r\n                //assign cartons result to order item \r\n                OneOrderItem.cartons = cartonsResult;\r\n                //prepare galons    \r\n                let galonsResult = [];\r\n                let galons = elme.galons;\r\n                let galonsQuantityOfBuying = elme.galonsQuantityOfBuying;\r\n                let galonsQuantityOfSubstitution = elme.galonsQuantityOfSubstitution;\r\n                for (let x = 0; x < galons.length; x++) {\r\n                    let oneGalonsItem = {};\r\n                    let item = galons[x];\r\n                    let QuantityOfBuying = galonsQuantityOfBuying[x]\r\n                    let QuantityOfSubstitution = galonsQuantityOfSubstitution[x]\r\n                    oneGalonsItem.item = item;\r\n                    oneGalonsItem.galonsQuantityOfBuying = QuantityOfBuying;\r\n                    oneGalonsItem.galonsQuantityOfSubstitution = QuantityOfSubstitution;\r\n                    galonsResult.push(oneGalonsItem);\r\n                }\r\n                //assign galons result to order item \r\n                OneOrderItem.galons = galonsResult;\r\n                OneOrderItem.location = elme.location;\r\n                OneOrderItem.customer = elme.customer;\r\n                OneOrderItem.provider = elme.provider;\r\n                OneOrderItem.status = elme.status;\r\n                OneOrderItem.creationDate = elme.creationDate;\r\n                OneOrderItem.id = elme.id;\r\n                OneOrderItem.price = elme.price;\r\n                OneOrderItem.deliveryPrice = elme.deliveryPrice;\r\n                return OneOrderItem;\r\n            })\r\n            res.send(new ApiResponse(\r\n                result,\r\n                page,\r\n                Math.ceil((result.length) / limit),\r\n                limit,\r\n                result.length,\r\n                req\r\n            ))\r\n        } catch (err) {\r\n            next(err)\r\n        }\r\n    },\r\n    async completedOrderOfOneProvider(req, res, next) {\r\n        try {\r\n            const limit = parseInt(req.query.limit) || 1100;\r\n            let page = req.query.page || 1;\r\n            let allOrders = await Order.find({\r\n                $and: [\r\n                    { provider: req.params.providerId },\r\n                    { $or: [{ status: \"delivered\" }, { status: \"rejected\" }] }\r\n                ]\r\n            })\r\n                .populate('cartons')\r\n                .populate('galons')\r\n                .populate('customer')\r\n                .populate('provider')\r\n                .skip((page - 1) * limit).limit(limit)\r\n                .sort({ creationDate: -1 });\r\n            //prepare response \r\n            let result = allOrders.map(elme => {\r\n                //first prepare cartons\r\n                let OneOrderItem = {};\r\n                let cartonsResult = [];\r\n                let cartons = elme.cartons;\r\n                let cartonsQuantity = elme.cartonsQuantity;\r\n                for (let x = 0; x < cartons.length; x++) {\r\n                    let oneCartonItem = {};\r\n                    let item = cartons[x];\r\n                    let quantity = cartonsQuantity[x]\r\n                    oneCartonItem.item = item;\r\n                    oneCartonItem.quantity = quantity;\r\n                    cartonsResult.push(oneCartonItem);\r\n                }\r\n                //assign cartons result to order item \r\n                OneOrderItem.cartons = cartonsResult;\r\n                //prepare galons    \r\n                let galonsResult = [];\r\n                let galons = elme.galons;\r\n                let galonsQuantityOfBuying = elme.galonsQuantityOfBuying;\r\n                let galonsQuantityOfSubstitution = elme.galonsQuantityOfSubstitution;\r\n                for (let x = 0; x < galons.length; x++) {\r\n                    let oneGalonsItem = {};\r\n                    let item = galons[x];\r\n                    let QuantityOfBuying = galonsQuantityOfBuying[x]\r\n                    let QuantityOfSubstitution = galonsQuantityOfSubstitution[x]\r\n                    oneGalonsItem.item = item;\r\n                    oneGalonsItem.galonsQuantityOfBuying = QuantityOfBuying;\r\n                    oneGalonsItem.galonsQuantityOfSubstitution = QuantityOfSubstitution;\r\n                    galonsResult.push(oneGalonsItem);\r\n                }\r\n                //assign galons result to order item \r\n                OneOrderItem.galons = galonsResult;\r\n                OneOrderItem.location = elme.location;\r\n                OneOrderItem.customer = elme.customer;\r\n                OneOrderItem.provider = elme.provider;\r\n                OneOrderItem.status = elme.status;\r\n                OneOrderItem.creationDate = elme.creationDate;\r\n                OneOrderItem.id = elme.id;\r\n                OneOrderItem.price = elme.price;\r\n                OneOrderItem.deliveryPrice = elme.deliveryPrice\r\n                return OneOrderItem;\r\n            })\r\n            res.send(new ApiResponse(\r\n                result,\r\n                page,\r\n                Math.ceil((result.length) / limit),\r\n                limit,\r\n                result.length,\r\n                req\r\n            ))\r\n        } catch (err) {\r\n            next(err)\r\n        }\r\n    },\r\n    //fetch some statistics about provider \r\n    async countOrdersOfProvider(req, res, next) {\r\n        try {\r\n            let providerId = req.params.providerId;\r\n            let providerDetails = await User.findById(providerId);\r\n            let countOfAllOrder = await Order.count({ provider: providerId });\r\n\r\n            let queryComplete = {};\r\n            queryComplete.status = \"delivered\";\r\n            queryComplete.provider = providerId;\r\n            let countOfCompleted = await Order.count(queryComplete);\r\n\r\n            let queryOfPending = {}\r\n            queryOfPending.status = \"pendding\";\r\n            queryOfPending.provider = providerId;\r\n            let countOfPendding = await Order.count(queryOfPending);\r\n\r\n            let queryOfRefuse = {}\r\n            queryOfRefuse.status = \"rejected\";\r\n            queryOfRefuse.provider = providerId;\r\n            let countOfRefuse = await Order.count(queryOfRefuse);\r\n\r\n            return res.status(200).json({\r\n                countOfAllOrder,\r\n                countOfCompleted,\r\n                countOfPendding,\r\n                countOfRefuse\r\n            })\r\n        } catch (err) {\r\n            next(err)\r\n        }\r\n    },\r\n\r\n    //fech some of reports about providers activities \r\n    async retriveSomeOfReports(req, res, next) {\r\n        try {\r\n            let providerId = req.params.providerId;\r\n            let query = {}\r\n            let { from, to } = req.query\r\n\r\n            if (from)\r\n                query.creationDate = { $gte: +from }\r\n            if (to)\r\n                query.creationDate = { ...query.creationDate, $lte: +to }\r\n            query.provider = providerId;\r\n            query.status = \"delivered\";\r\n            console.log(req.query)\r\n            let allOrders = await Order.find(query);\r\n            let totalProductPrice = allOrders.reduce((accumulator, currentValue) => accumulator + currentValue.price, 0);\r\n            console.log(totalProductPrice)\r\n            let totalDeliveryPrice = allOrders.reduce((accumulator, currentValue) => accumulator + currentValue.deliveryPrice, 0);\r\n            let totalPrice = totalDeliveryPrice + totalProductPrice;\r\n            let numberOfOrders = allOrders.length;\r\n            return res.status(200).json({\r\n                totalProductPrice,\r\n                totalDeliveryPrice,\r\n                totalPrice,\r\n                numberOfOrders\r\n            })\r\n        } catch (err) {\r\n            next(err)\r\n        }\r\n    },\r\n}"]}