{"version":3,"sources":["../../src/helpers/ApiResponse.js"],"names":["ApiResponse","data","page","pageCount","limit","totalCount","req","links","appUrl","protocol","get","parse","originalUrl","pathname","addSelfLink","addNextLink","addPrevLink","self","afterPage","next","last","prevPage","prev","first"],"mappings":";;;;;;;;AAAA;;;;;;;;IAEMA,W;AAQF,yBAAYC,IAAZ,EAAkBC,IAAlB,EAAwBC,SAAxB,EAAmCC,KAAnC,EAA0CC,UAA1C,EAAsDC,GAAtD,EAA2D;AAAA;;AAAA,aAF3DC,KAE2D,GAFnD,EAEmD;;AACvD,aAAKN,IAAL,GAAYA,IAAZ;AACA,aAAKC,IAAL,GAAYA,IAAZ;AACA,aAAKC,SAAL,GAAiBA,SAAjB;AACA,aAAKC,KAAL,GAAaA,KAAb;AACA,aAAKC,UAAL,GAAkBA,UAAlB;AACA,YAAIG,SAASF,IAAIG,QAAJ,GAAe,KAAf,GAAuBH,IAAII,GAAJ,CAAQ,MAAR,CAAvB,GAAyC,cAAIC,KAAJ,CAAUL,IAAIM,WAAd,EAA2BC,QAAjF;;AAEA,aAAKC,WAAL,CAAiBN,MAAjB;AACA,YAAIN,QAAQ,CAAR,IAAaA,OAAOC,SAAxB,EACE,KAAKY,WAAL,CAAiBP,MAAjB;;AAEF,YAAIN,OAAO,CAAP,IAAYA,QAAQC,SAAxB,EACI,KAAKa,WAAL,CAAiBR,MAAjB;AACP;;;;oCAEWA,M,EAAQ;AAChB,iBAAKD,KAAL,CAAWU,IAAX,GAAkBT,SAAS,QAAT,GAAoB,KAAKN,IAAzB,GAAgC,SAAhC,GAA4C,KAAKE,KAAnE,CADgB,CAC0D;AAC7E;;;oCAEWI,M,EAAQ;AAChB,gBAAMU,YAAY,KAAKhB,IAAL,GAAY,CAA9B;AACA,iBAAKK,KAAL,CAAWY,IAAX,GAAkBX,SAAS,QAAT,GAAoBU,SAApB,GAAgC,SAAhC,GAA4C,KAAKd,KAAnE,CAFgB,CAE0D;AAC1E,iBAAKG,KAAL,CAAWa,IAAX,GAAkBZ,SAAS,QAAT,GAAoB,KAAKL,SAAzB,GAAqC,SAArC,GAAiD,KAAKC,KAAxE,CAHgB,CAG+D;AAClF;;;oCAEWI,M,EAAQ;AAChB,gBAAMa,WAAW,KAAKnB,IAAL,GAAY,CAA7B;AACA,iBAAKK,KAAL,CAAWe,IAAX,GAAkBd,SAAS,QAAT,GAAoBa,QAApB,GAA+B,SAA/B,GAA2C,KAAKjB,KAAlE,CAFgB,CAEyD;AACzE,iBAAKG,KAAL,CAAWgB,KAAX,GAAmBf,SAAS,SAAT,GAAqB,SAArB,GAAiC,KAAKJ,KAAzD,CAHgB,CAGgD;AACnE;;;;;;kBAGUJ,W","file":"ApiResponse.js","sourcesContent":["import url from \"url\";\r\n\r\nclass ApiResponse {\r\n    data;\r\n    page;\r\n    pageCount;\r\n    totalCount;\r\n    limit;\r\n    links = {};\r\n\r\n    constructor(data, page, pageCount, limit, totalCount, req) {\r\n        this.data = data;\r\n        this.page = page;\r\n        this.pageCount = pageCount;\r\n        this.limit = limit;\r\n        this.totalCount = totalCount;\r\n        let appUrl = req.protocol + '://' + req.get('host') + url.parse(req.originalUrl).pathname;\r\n\r\n        this.addSelfLink(appUrl);\r\n        if (page >= 1 && page < pageCount)\r\n          this.addNextLink(appUrl);\r\n\r\n        if (page > 1 && page <= pageCount)\r\n            this.addPrevLink(appUrl);\r\n    }\r\n\r\n    addSelfLink(appUrl) {\r\n        this.links.self = appUrl + \"?page=\" + this.page + \"&limit=\" + this.limit; // self page\r\n    }\r\n\r\n    addNextLink(appUrl) {\r\n        const afterPage = this.page + 1;\r\n        this.links.next = appUrl + \"?page=\" + afterPage + \"&limit=\" + this.limit; // next page\r\n        this.links.last = appUrl + \"?page=\" + this.pageCount + \"&limit=\" + this.limit; // last page\r\n    }\r\n\r\n    addPrevLink(appUrl) {\r\n        const prevPage = this.page - 1;\r\n        this.links.prev = appUrl + \"?page=\" + prevPage + \"&limit=\" + this.limit; // prev page\r\n        this.links.first = appUrl + \"?page=1\" + \"&limit=\" + this.limit; // first page\r\n    }\r\n}\r\n\r\nexport default ApiResponse;"]}